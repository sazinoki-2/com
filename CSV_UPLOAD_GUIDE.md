# 📤 microCMS CSV アップロード ガイド（修正版）

## ⚠️ 重要：microCMS CSVインポートの制限事項

### ✅ CSVインポート対応（リスト型APIのみ）
- **stats** (統計情報) - リスト形式
- **other-items** (その他コンテンツ) - リスト形式

### ❌ CSVインポート非対応（オブジェクト型API）
- **profile** (プロフィール) - オブジェクト形式 → microCMS管理画面で手動編集
- **dao-section** (DAOセクション) - オブジェクト形式 → microCMS管理画面で手動編集  
- **contact-section** (コンタクト) - オブジェクト形式 → microCMS管理画面で手動編集

## 🚀 使用方法

### 1. ポートフォリオサイトを開く
`sazinoki_portfolio (2).html` をブラウザで開き、右上の「📤 CSV」ボタンをクリック

### 2. リスト型APIのCSVアップロード

#### Stats（統計情報）のアップロード
1. `csv-templates/stats.csv` を編集
2. APIキーを入力
3. Stats CSVファイルを選択してアップロード

#### Other Items（その他コンテンツ）のアップロード
1. `csv-templates/other-items.csv` を編集
2. APIキーを入力
3. Other Items CSVファイルを選択してアップロード

### 3. オブジェクト型APIの編集方法
1. アップロード画面の「microCMS管理画面で編集」ボタンをクリック
2. microCMS管理画面が新しいタブで開きます
3. 直接編集して保存

## 📋 正しいCSV形式

### stats.csv（統計情報）
```csv
"number","label"
"300+","作品数"
"50+","クライアント数"
"200+","相談実績"
"2000万","資本金"
```

### other-items.csv（その他コンテンツ）
```csv
"title","description","details"
"📝 ブログ","WEB3、クリプト、フリーランス生活について発信中","最新記事: 「暗号資産で人生変わった話」 | 週刊更新 | 月間PV: 50,000+"
"🎙️ 音声配信","人生コンサル・起業・クリエイター論を音声でお届け","最新回: 「会社員から独立する方法」 | 毎週更新 | 登録者: 3,000+"
"💡 人生コンサル","会社辞めて自由になりたいあなたを全力サポート","満足度: ★★★★★ (4.9/5.0) | 相談実績: 200+ | 成功率: 89%"
```

## ⚙️ microCMS API設定

### リスト型API（CSVインポート対応）

#### stats（統計情報）
| フィールド名 | 型 | 必須 |
|-------------|---|------|
| number | テキスト | ✅ |
| label | テキスト | ✅ |

#### other-items（その他コンテンツ）
| フィールド名 | 型 | 必須 |
|-------------|---|------|
| title | テキスト | ✅ |
| description | テキスト | ✅ |
| details | テキスト | ❌ |

### オブジェクト型API（管理画面で編集）

#### profile（プロフィール）
| フィールド名 | 型 | 必須 |
|-------------|---|------|
| name | テキスト | ✅ |
| subtitle | テキスト | ✅ |
| description | テキスト | ✅ |
| status_text | テキスト | ✅ |

#### dao-section（DAOセクション）
| フィールド名 | 型 | 必須 |
|-------------|---|------|
| title | テキスト | ✅ |
| description | リッチエディタ | ✅ |
| discord_link | テキスト | ❌ |

#### contact-section（コンタクト）
| フィールド名 | 型 | 必須 |
|-------------|---|------|
| title | テキスト | ✅ |
| description | テキスト | ✅ |

## 🎨 機能詳細

### ✅ 実装済み機能
1. **リスト型API**: CSV直接アップロード対応
2. **オブジェクト型API**: 管理画面への直接リンク
3. **エラーハンドリング**: 適切なエラーメッセージ表示
4. **プログレス表示**: アップロード状況をリアルタイム表示
5. **自動リロード**: アップロード完了後の自動反映

## 📝 重要な注意事項

### CSV作成時の注意
- **IDフィールドは不要**: microCMSが自動生成
- **UTF-8エンコーディング必須**: BOM付きは不可
- **ダブルクォーテーション**: カンマを含む値は必須
- **改行コード**: LF または CRLF

### microCMS仕様の制限
- **リスト型APIのみ**: CSVインポート対応
- **オブジェクト型API**: CSVインポート非対応
- **全行エラーなし**: 1行でもエラーがあると全体が失敗
- **プラン制限**: Hobbyプランはファイル非対応

## 🐛 トラブルシューティング

### よくある問題

#### 1. 「CSVデータの読み込み、APIスキーマのフィールド型と整合しません」
**原因**: 
- IDフィールドが含まれている
- フィールド名がAPI設定と不一致
- データ型が間違っている

**解決方法**:
- IDフィールドを削除
- microCMS管理画面でフィールド名を確認
- サンプルCSVをダウンロードして確認

#### 2. 「インポートに失敗しました」
**原因**:
- オブジェクト型APIにCSVインポートを試行
- UTF-8エンコーディングでない
- BOM付きUTF-8

**解決方法**:
- リスト型APIのみ使用
- メモ帳等でUTF-8（BOMなし）で保存
- テキストエディタのエンコーディング設定を確認

## 📞 サポート

問題が解決しない場合：
1. microCMS管理画面でAPI設定を確認
2. CSVファイルのエンコーディングを確認
3. ブラウザの開発者ツールでエラー詳細を確認

---

**🎉 正しい方法でmicroCMSにデータをアップロードしましょう！**